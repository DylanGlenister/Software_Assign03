<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastAPI Routes Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
            font-size: 24px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-left: 20px;
            margin-right: 20px;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(52, 152, 219, 0.3);
            border-left-color: #3498db;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            opacity: 0.8;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            margin-bottom: 0;
        }

        .section-header h3 {
            font-size: 28px;
            font-weight: 300;
        }

        .section-header p {
            margin-top: 8px;
            opacity: 0.9;
        }

        .endpoint-card {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 0 0 10px 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .endpoint-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .method-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .method-post { background: #28a745; color: white; }
        .method-get { background: #007bff; color: white; }
        .method-put { background: #ffc107; color: #212529; }
        .method-delete { background: #dc3545; color: white; }

        .endpoint-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        .response-container {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .response-container h4 {
            margin-bottom: 10px;
            color: #495057;
        }

        .response-content {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 300px;
            overflow-y: auto;
        }

        .token-display {
            background: #e8f5e8;
            border: 1px solid #c3e6c3;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }

        .fake-data-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .fake-data-section h4 {
            margin-bottom: 10px;
            color: #856404;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .error {
            color: #dc3545;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .success {
            color: #155724;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>API Demo</h2>
            <div class="nav-item active" data-section="accounts">
                <span class="nav-icon">üîê</span>
                Account Routes
            </div>
            <div class="nav-item" data-section="admin">
                <span class="nav-icon">üëë</span>
                Admin Routes
            </div>
            <div class="nav-item" data-section="customer">
                <span class="nav-icon">üõí</span>
                Customer Routes
            </div>
            <div class="nav-item" data-section="config">
                <span class="nav-icon">‚öôÔ∏è</span>
                Configuration
            </div>
        </div>

        <div class="main-content">
            <!-- Configuration Section -->
            <div id="config" class="content-section">
                <div class="section-header">
                    <h3>Configuration</h3>
                    <p>Set up your API base URL and manage authentication tokens</p>
                </div>
                <div class="endpoint-card">
                    <div class="endpoint-body">
                        <div class="form-group">
                            <label for="apiBaseUrl">API Base URL</label>
                            <input type="text" id="apiBaseUrl" class="form-control" value="http://localhost:8000/api/v1/endpoints" placeholder="http://localhost:8000/api/v1/endpoints">
                        </div>
                        
                        <div id="currentToken" class="token-display" style="display: none;">
                            <strong>Current Token:</strong>
                            <div id="tokenValue"></div>
                            <button onclick="clearToken()" class="btn btn-secondary" style="margin-top: 10px;">Clear Token</button>
                        </div>
                        
                        <button onclick="saveConfig()" class="btn btn-primary">Save Configuration</button>
                    </div>
                </div>
            </div>

            <!-- Account Routes Section -->
            <div id="accounts" class="content-section active">
                <div class="section-header">
                    <h3>Account Routes</h3>
                    <p>Authentication and account management endpoints</p>
                </div>

                <!-- Login -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/accounts/login</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="fake-data-section">
                            <h4>Sample Data</h4>
                            <button onclick="fillLoginData()" class="btn btn-secondary">Fill Sample Data</button>
                        </div>
                        
                        <form id="loginForm">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <input type="email" id="loginEmail" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Login</button>
                        </form>
                        <div id="loginResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Token Info -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/accounts/tokenInfo</span>
                    </div>
                    <div class="endpoint-body">
                        <p>This endpoint requires authentication. Make sure you're logged in first.</p>
                        <button onclick="getTokenInfo()" class="btn btn-primary">Get Token Info</button>
                        <div id="tokenInfoResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Update Account -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span>/accounts/update</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="updateAccountForm">
                            <div class="form-group">
                                <label for="updateEmail">New Email (optional)</label>
                                <input type="email" id="updateEmail" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="updateStatus">Status ID (optional)</label>
                                <select id="updateStatus" class="form-control">
                                    <option value="">Select status</option>
                                    <option value="1">Active (1)</option>
                                    <option value="0">Inactive (0)</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Update Account</button>
                        </form>
                        <div id="updateAccountResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Change Password -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span>/accounts/change-password</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="changePasswordForm">
                            <div class="form-group">
                                <label for="newPassword">New Password (min 8 characters)</label>
                                <input type="password" id="newPassword" class="form-control" minlength="8" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                        <div id="changePasswordResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Routes Section -->
            <div id="admin" class="content-section">
                <div class="section-header">
                    <h3>Admin Routes</h3>
                    <p>Administrative functions requiring admin privileges</p>
                </div>

                <!-- Create Account -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/admin/createAccount</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="fake-data-section">
                            <h4>Sample Data</h4>
                            <button onclick="fillCreateAccountData()" class="btn btn-secondary">Fill Sample Data</button>
                        </div>
                        
                        <form id="createAccountForm">
                            <div class="form-group">
                                <label for="createAccountEmail">Email</label>
                                <input type="email" id="createAccountEmail" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="createAccountPassword">Password (min 8 characters)</label>
                                <input type="password" id="createAccountPassword" class="form-control" minlength="8" required>
                            </div>
                            <div class="form-group">
                                <label for="createAccountRole">Role ID</label>
                                <select id="createAccountRole" class="form-control" required>
                                    <option value="">Select role</option>
                                    <option value="1">Admin (1)</option>
                                    <option value="2">Customer (2)</option>
                                    <option value="3">Staff (3)</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Create Account</button>
                        </form>
                        <div id="createAccountResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Change Others Password -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span>/admin/changeOthersPassword</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="changeOthersPasswordForm">
                            <div class="form-group">
                                <label for="othersNewPassword">New Password (min 8 characters)</label>
                                <input type="password" id="othersNewPassword" class="form-control" minlength="8" required>
                            </div>
                            <div class="form-group">
                                <label for="targetAccountId">Account ID</label>
                                <input type="number" id="targetAccountId" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                        <div id="changeOthersPasswordResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Deactivate Account -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-put">PUT</span>
                        <span>/admin/deactivateAccount</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="deactivateAccountForm">
                            <div class="form-group">
                                <label for="deactivateAccountId">Account ID</label>
                                <input type="number" id="deactivateAccountId" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Deactivate Account</button>
                        </form>
                        <div id="deactivateAccountResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Delete Account -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-delete">DELETE</span>
                        <span>/admin/deleteAccount</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="deleteAccountForm">
                            <div class="form-group">
                                <label for="deleteAccountId">Account ID</label>
                                <input type="number" id="deleteAccountId" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Delete Account</button>
                        </form>
                        <div id="deleteAccountResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Get All Accounts -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span>/admin/accounts</span>
                    </div>
                    <div class="endpoint-body">
                        <button onclick="getAllAccounts()" class="btn btn-primary">Get All Accounts</button>
                        <div id="getAllAccountsResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Routes Section -->
            <div id="customer" class="content-section">
                <div class="section-header">
                    <h3>Customer Routes</h3>
                    <p>Customer registration and shopping cart management</p>
                </div>

                <!-- Register -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/customer/register</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="fake-data-section">
                            <h4>Sample Data</h4>
                            <button onclick="fillRegisterData()" class="btn btn-secondary">Fill Sample Data</button>
                        </div>
                        
                        <form id="registerForm">
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <input type="email" id="registerEmail" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Password</label>
                                <input type="password" id="registerPassword" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Register</button>
                        </form>
                        <div id="registerResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Get Trolly -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-get">GET</span>
                        <span>/customer/trolly</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Requires customer authentication. Login as a customer first.</p>
                        <button onclick="getTrolly()" class="btn btn-primary">Get Shopping Cart</button>
                        <div id="getTrollyResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Add to Trolly -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/customer/trolly/add</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="fake-data-section">
                            <h4>Sample Data</h4>
                            <button onclick="fillTrollyData()" class="btn btn-secondary">Fill Sample Data</button>
                        </div>
                        
                        <form id="addToTrollyForm">
                            <div class="form-group">
                                <label for="addProductId">Product ID</label>
                                <input type="number" id="addProductId" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="addAmount">Amount</label>
                                <input type="number" id="addAmount" class="form-control" value="1" min="1" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Add to Cart</button>
                        </form>
                        <div id="addToTrollyResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Remove from Trolly -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/customer/trolly/remove</span>
                    </div>
                    <div class="endpoint-body">
                        <form id="removeFromTrollyForm">
                            <div class="form-group">
                                <label for="removeProductId">Product ID</label>
                                <input type="number" id="removeProductId" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="removeAmount">Amount</label>
                                <input type="number" id="removeAmount" class="form-control" value="1" min="1" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Remove from Cart</button>
                        </form>
                        <div id="removeFromTrollyResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Clear Trolly -->
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="method-badge method-post">POST</span>
                        <span>/customer/trolly/clear</span>
                    </div>
                    <div class="endpoint-body">
                        <p>Clear all items from the shopping cart.</p>
                        <button onclick="clearTrolly()" class="btn btn-primary">Clear Cart</button>
                        <div id="clearTrollyResponse" class="response-container" style="display: none;">
                            <h4>Response:</h4>
                            <div class="response-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global configuration
        let API_BASE_URL = 'http://localhost:8000/api';
        let AUTH_TOKEN = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved configuration
            loadConfig();
            
            // Set up navigation
            setupNavigation();
            
            // Set up form handlers
            setupFormHandlers();
            
            // Update token display
            updateTokenDisplay();
        });

        function loadConfig() {
            const savedUrl = localStorage.getItem('apiBaseUrl');
            const savedToken = localStorage.getItem('authToken');
            
            if (savedUrl) {
                API_BASE_URL = savedUrl;
                document.getElementById('apiBaseUrl').value = savedUrl;
            }
            
            if (savedToken) {
                AUTH_TOKEN = savedToken;
                updateTokenDisplay();
            }
        }

        function saveConfig() {
            const url = document.getElementById('apiBaseUrl').value.trim();
            if (url) {
                API_BASE_URL = url;
                localStorage.setItem('apiBaseUrl', url);
                showNotification('Configuration saved successfully!', 'success');
            }
        }

        function clearToken() {
            AUTH_TOKEN = null;
            localStorage.removeItem('authToken');
            updateTokenDisplay();
            showNotification('Token cleared successfully!', 'success');
        }

        function updateTokenDisplay() {
            const tokenDisplay = document.getElementById('currentToken');
            const tokenValue = document.getElementById('tokenValue');
            
            if (AUTH_TOKEN) {
                tokenDisplay.style.display = 'block';
                tokenValue.textContent = AUTH_TOKEN;
            } else {
                tokenDisplay.style.display = 'none';
            }
        }

        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    // Update active nav item
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update active section
                    sections.forEach(section => section.classList.remove('active'));
                    document.getElementById(targetSection).classList.add('active');
                });
            });
        }

        function setupFormHandlers() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Update account form
            document.getElementById('updateAccountForm').addEventListener('submit', handleUpdateAccount);
            
            // Change password form
            document.getElementById('changePasswordForm').addEventListener('submit', handleChangePassword);
            
            // Create account form
            document.getElementById('createAccountForm').addEventListener('submit', handleCreateAccount);
            
            // Change others password form
            document.getElementById('changeOthersPasswordForm').addEventListener('submit', handleChangeOthersPassword);
            
            // Deactivate account form
            document.getElementById('deactivateAccountForm').addEventListener('submit', handleDeactivateAccount);
            
            // Delete account form
            document.getElementById('deleteAccountForm').addEventListener('submit', handleDeleteAccount);
            
            // Register form
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            
            // Add to trolly form
            document.getElementById('addToTrollyForm').addEventListener('submit', handleAddToTrolly);
            
            // Remove from trolly form
            document.getElementById('removeFromTrollyForm').addEventListener('submit', handleRemoveFromTrolly);
        }

        // API request helper
        async function makeRequest(endpoint, method = 'GET', body = null, requireAuth = false) {
            const url = `${API_BASE_URL}${endpoint}`;
            const headers = {
                'Content-Type': 'application/json'
            };
            
            if (requireAuth && AUTH_TOKEN) {
                headers['Authorization'] = `Bearer ${AUTH_TOKEN}`;
            }
            
            const config = {
                method,
                headers
            };
            
            if (body) {
                config.body = JSON.stringify(body);
            }
            
            try {
                const response = await fetch(url, config);
                const data = await response.text();
                
                let jsonData;
                try {
                    jsonData = JSON.parse(data);
                } catch (e) {
                    jsonData = { raw_response: data };
                }
                
                return {
                    ok: response.ok,
                    status: response.status,
                    data: jsonData
                };
            } catch (error) {
                return {
                    ok: false,
                    status: 0,
                    data: { error: error.message }
                };
            }
        }

        // Response display helper
        function displayResponse(elementId, response) {
            const container = document.getElementById(elementId);
            const content = container.querySelector('.response-content');
            
            container.style.display = 'block';
            content.textContent = JSON.stringify(response, null, 2);
            
            // Scroll to response
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Notification helper
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#d4edda' : type === 'error' ? '#f8d7da' : '#d1ecf1'};
                color: ${type === 'success' ? '#155724' : type === 'error' ? '#721c24' : '#0c5460'};
                border: 1px solid ${type === 'success' ? '#c3e6cb' : type === 'error' ? '#f5c6cb' : '#bee5eb'};
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                max-width: 300px;
                font-weight: 500;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Form loading helper
        function setFormLoading(formId, loading) {
            const form = document.getElementById(formId);
            if (loading) {
                form.classList.add('loading');
            } else {
                form.classList.remove('loading');
            }
        }

        // Event handlers
        async function handleLogin(e) {
            e.preventDefault();
            setFormLoading('loginForm', true);
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const response = await makeRequest('/accounts/login', 'POST', {
                email,
                password
            });
            
            if (response.ok && response.data.token) {
                AUTH_TOKEN = response.data.token.access_token;
                localStorage.setItem('authToken', AUTH_TOKEN);
                updateTokenDisplay();
                showNotification('Login successful!', 'success');
            } else {
                showNotification('Login failed!', 'error');
            }
            
            displayResponse('loginResponse', response);
            setFormLoading('loginForm', false);
        }

        async function getTokenInfo() {
            if (!AUTH_TOKEN) {
                showNotification('Please login first!', 'error');
                return;
            }
            
            const response = await makeRequest('/accounts/tokenInfo', 'POST', null, true);
            displayResponse('tokenInfoResponse', response);
        }

        async function handleUpdateAccount(e) {
            e.preventDefault();
            setFormLoading('updateAccountForm', true);
            
            const email = document.getElementById('updateEmail').value;
            const status = document.getElementById('updateStatus').value;
            
            const payload = {};
            if (email) payload.email = email;
            if (status) payload.status_ID = parseInt(status);
            
            const response = await makeRequest('/accounts/update', 'PUT', payload, true);
            
            if (response.ok) {
                showNotification('Account updated successfully!', 'success');
            } else {
                showNotification('Failed to update account!', 'error');
            }
            
            displayResponse('updateAccountResponse', response);
            setFormLoading('updateAccountForm', false);
        }

        async function handleChangePassword(e) {
            e.preventDefault();
            setFormLoading('changePasswordForm', true);
            
            const newPassword = document.getElementById('newPassword').value;
            
            const response = await makeRequest('/accounts/change-password', 'PUT', {
                new_password: newPassword
            }, true);
            
            if (response.ok) {
                showNotification('Password changed successfully!', 'success');
                document.getElementById('newPassword').value = '';
            } else {
                showNotification('Failed to change password!', 'error');
            }
            
            displayResponse('changePasswordResponse', response);
            setFormLoading('changePasswordForm', false);
        }

        async function handleCreateAccount(e) {
            e.preventDefault();
            setFormLoading('createAccountForm', true);
            
            const email = document.getElementById('createAccountEmail').value;
            const password = document.getElementById('createAccountPassword').value;
            const roleId = parseInt(document.getElementById('createAccountRole').value);
            
            const response = await makeRequest('/admin/createAccount', 'POST', {
                email,
                password,
                role_ID: roleId
            }, true);
            
            if (response.ok) {
                showNotification('Account created successfully!', 'success');
                document.getElementById('createAccountForm').reset();
            } else {
                showNotification('Failed to create account!', 'error');
            }
            
            displayResponse('createAccountResponse', response);
            setFormLoading('createAccountForm', false);
        }

        async function handleChangeOthersPassword(e) {
            e.preventDefault();
            setFormLoading('changeOthersPasswordForm', true);
            
            const newPassword = document.getElementById('othersNewPassword').value;
            const accountId = parseInt(document.getElementById('targetAccountId').value);
            
            const response = await makeRequest('/admin/changeOthersPassword', 'PUT', {
                new_password: newPassword,
                account_ID: accountId
            }, true);
            
            if (response.ok) {
                showNotification('Password changed successfully!', 'success');
                document.getElementById('changeOthersPasswordForm').reset();
            } else {
                showNotification('Failed to change password!', 'error');
            }
            
            displayResponse('changeOthersPasswordResponse', response);
            setFormLoading('changeOthersPasswordForm', false);
        }

        async function handleDeactivateAccount(e) {
            e.preventDefault();
            setFormLoading('deactivateAccountForm', true);
            
            const accountId = parseInt(document.getElementById('deactivateAccountId').value);
            
            const response = await makeRequest('/admin/deactivateAccount', 'PUT', {
                account_ID: accountId
            }, true);
            
            if (response.ok) {
                showNotification('Account deactivated successfully!', 'success');
                document.getElementById('deactivateAccountForm').reset();
            } else {
                showNotification('Failed to deactivate account!', 'error');
            }
            
            displayResponse('deactivateAccountResponse', response);
            setFormLoading('deactivateAccountForm', false);
        }

        async function handleDeleteAccount(e) {
            e.preventDefault();
            
            if (!confirm('Are you sure you want to delete this account? This action cannot be undone.')) {
                return;
            }
            
            setFormLoading('deleteAccountForm', true);
            
            const accountId = parseInt(document.getElementById('deleteAccountId').value);
            
            const response = await makeRequest('/admin/deleteAccount', 'DELETE', {
                account_ID: accountId
            }, true);
            
            if (response.ok) {
                showNotification('Account deleted successfully!', 'success');
                document.getElementById('deleteAccountForm').reset();
            } else {
                showNotification('Failed to delete account!', 'error');
            }
            
            displayResponse('deleteAccountResponse', response);
            setFormLoading('deleteAccountForm', false);
        }

        async function getAllAccounts() {
            const response = await makeRequest('/admin/accounts', 'GET', null, true);
            
            if (response.ok) {
                showNotification('Accounts retrieved successfully!', 'success');
            } else {
                showNotification('Failed to retrieve accounts!', 'error');
            }
            
            displayResponse('getAllAccountsResponse', response);
        }

        async function handleRegister(e) {
            e.preventDefault();
            setFormLoading('registerForm', true);
            
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            const response = await makeRequest('/customer/register', 'POST', {
                email,
                password
            });
            
            if (response.ok) {
                showNotification('Registration successful!', 'success');
                document.getElementById('registerForm').reset();
            } else {
                showNotification('Registration failed!', 'error');
            }
            
            displayResponse('registerResponse', response);
            setFormLoading('registerForm', false);
        }

        async function getTrolly() {
            if (!AUTH_TOKEN) {
                showNotification('Please login as a customer first!', 'error');
                return;
            }
            
            const response = await makeRequest('/customer/trolly', 'GET', null, true);
            
            if (response.ok) {
                showNotification('Shopping cart retrieved successfully!', 'success');
            } else {
                showNotification('Failed to retrieve shopping cart!', 'error');
            }
            
            displayResponse('getTrollyResponse', response);
        }

        async function handleAddToTrolly(e) {
            e.preventDefault();
            setFormLoading('addToTrollyForm', true);
            
            const productId = parseInt(document.getElementById('addProductId').value);
            const amount = parseInt(document.getElementById('addAmount').value);
            
            const response = await makeRequest('/customer/trolly/add', 'POST', {
                product_id: productId,
                amount: amount
            }, true);
            
            if (response.ok) {
                showNotification('Item added to cart successfully!', 'success');
            } else {
                showNotification('Failed to add item to cart!', 'error');
            }
            
            displayResponse('addToTrollyResponse', response);
            setFormLoading('addToTrollyForm', false);
        }

        async function handleRemoveFromTrolly(e) {
            e.preventDefault();
            setFormLoading('removeFromTrollyForm', true);
            
            const productId = parseInt(document.getElementById('removeProductId').value);
            const amount = parseInt(document.getElementById('removeAmount').value);
            
            const response = await makeRequest('/customer/trolly/remove', 'POST', {
                product_id: productId,
                amount: amount
            }, true);
            
            if (response.ok) {
                showNotification('Item removed from cart successfully!', 'success');
            } else {
                showNotification('Failed to remove item from cart!', 'error');
            }
            
            displayResponse('removeFromTrollyResponse', response);
            setFormLoading('removeFromTrollyForm', false);
        }

        async function clearTrolly() {
            if (!AUTH_TOKEN) {
                showNotification('Please login as a customer first!', 'error');
                return;
            }
            
            const response = await makeRequest('/customer/trolly/clear', 'POST', null, true);
            
            if (response.ok) {
                showNotification('Shopping cart cleared successfully!', 'success');
            } else {
                showNotification('Failed to clear shopping cart!', 'error');
            }
            
            displayResponse('clearTrollyResponse', response);
        }

        // Fake data functions
        function fillLoginData() {
            document.getElementById('loginEmail').value = 'customer@example.com';
            document.getElementById('loginPassword').value = 'password123';
        }

        function fillCreateAccountData() {
            const timestamp = Date.now();
            document.getElementById('createAccountEmail').value = `user${timestamp}@example.com`;
            document.getElementById('createAccountPassword').value = 'password123';
            document.getElementById('createAccountRole').value = '2';
        }

        function fillRegisterData() {
            const timestamp = Date.now();
            document.getElementById('registerEmail').value = `customer${timestamp}@example.com`;
            document.getElementById('registerPassword').value = 'password123';
        }

        function fillTrollyData() {
            document.getElementById('addProductId').value = Math.floor(Math.random() * 100) + 1;
            document.getElementById('addAmount').value = Math.floor(Math.random() * 5) + 1;
        }
    </script>
</body>
</html>
                }